(function(e){function t(t){for(var o,s,a=t[0],c=t[1],l=t[2],d=0,u=[];d<a.length;d++)s=a[d],i[s]&&u.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);p&&p(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},s={app:0},i={app:0},r=[];function a(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"7feba601"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise(function(t,n){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"11e22bf4"}[e]+".css",i=c.p+o,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var l=r[a],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===o||d===i))return t()}var u=document.getElementsByTagName("style");for(a=0;a<u.length;a++){l=u[a],d=l.getAttribute("data-href");if(d===o||d===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete s[e],p.parentNode.removeChild(p),n(r)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){s[e]=0}));var o=i[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise(function(t,n){o=i[e]=[t,n]});t.push(o[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=a(e),l=function(t){d.onerror=d.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+o+": "+s+")");r.type=o,r.request=s,n[1](r)}i[e]=void 0}};var u=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4436:function(e,t,n){},4910:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),s=n("ce19"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root-container",attrs:{id:"app"}},[e._m(0),n("div",{staticClass:"root-body"},[n("router-view")],1)])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav-container"},[n("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark sidebarNavigation",attrs:{"data-sidebarClass":"navbar-dark bg-dark"}},[n("div",{staticClass:"container-fluid"},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("Gatekeeper")])])])])}],a=(n("5c0b"),n("2877")),c={},l=Object(a["a"])(c,i,r,!1,null,null,null),d=l.exports,u=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"repo-container"},["LOADING_REPOS"!==e.$getUiState?n("div",{staticClass:"repo-nav"},e._l(e.repos,function(t,o){return n("div",{key:t.id,staticClass:"repo-title",class:{selected:e.selectedRepo==o,error:!t.status.initialized},on:{click:function(t){return e.setSelectedRepo(o)}}},[n("h6",{staticClass:"text-left"},[e._v(e._s(t.name))]),n("p",{staticClass:"text-left mb-0"},[e._v(e._s(t.id))])])}),0):e._e(),n("div",{staticClass:"repo-child-container"},["LOADING_REPOS"===e.$getUiState?n("div",{staticClass:"repo-body middle-child"},[n("h2",[e._v("Repos are loading wait util")])]):e._e(),"SELECT_REPO"===e.$getUiState?n("div",{staticClass:"repo-body middle-child"},[n("h2",[e._v("please select a repository")])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"FETCHING_COMMITS"===e.$getUiState,expression:"$getUiState === 'FETCHING_COMMITS'"}],staticClass:"repo-body middle-child repo-commit-fetch"},[n("h2",[e._v("fetching commits for "),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.selectedBranch))])])]),"REPO_INDEX"===e.$getUiState?n("div",{staticClass:"repo-body middle-child"},[n("h2",[e._v("repository is being indexed")])]):e._e(),"REPO_ERROR"===e.$getUiState?n("div",{staticClass:"repo-body middle-child"},[e._m(0)]):e._e(),"COMMIT_ERROR"===e.$getUiState?n("div",{staticClass:"repo-body middle-child"},[n("h2",[e._v("unable to load commits")])]):e._e(),"DISPLAY_COMMITS"===e.$getUiState||"FETCHING_COMMITS"===e.$getUiState?n("div",{staticClass:"repo-body"},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$refreshUi()}}},[e._v("refresh ui")]),e._m(1),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return e.$refreshGit()}}},[e._v("refresh git")])])]),n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[e._v(e._s(e.selectedBranch))]),e._m(2),n("div",{staticClass:"dropdown-menu"},e._l(e.branches,function(t){return n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(n){return e.setSelectedBranch(t.name)}}},[e._v(e._s(t.name))])}),0)])]),e._l(e.commits,function(t){return n("div",{key:t.id,staticClass:"card commit"},[n("div",{staticClass:"card-body commit-body"},[n("div",{staticClass:"commit-info"},[n("p",{staticClass:"font-weight-bold text-left mb-1"},[e._v(e._s(t.message))]),n("p",{staticClass:"font-weight-normal text-left author-info"},[e._v("\n              commited on "+e._s(t.committer.time.substring(0,10))+" by "+e._s(t.committer.name)+"\n            ")])]),n("div",{staticClass:"commit-meta-data"},[n("p",{staticClass:"font-weight-normal text-right"},[e._v(e._s(t.id.substring(0,7)))])])])])}),n("div",{staticClass:"footer text-center mt-5 mb-5"},[n("button",{staticClass:"btn btn-lg btn-primary load-more-commit-btn",attrs:{disabled:e.toggles.isLoadMoreBtnDisabled},on:{click:function(t){return e.fetchNextSetOfCommits()}}},[e._v("load more\n        ")])])],2):e._e()])])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"text-center"},[e._v("unable to load repositories")]),n("h5",{staticClass:"text-center"},[e._v("Please refresh and try again")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"btn btn-secondary dropdown-toggle dropdown-toggle-split",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("span",{staticClass:"sr-only"},[e._v("Toggle Dropdown")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"btn btn-secondary dropdown-toggle dropdown-toggle-split",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("span",{staticClass:"sr-only"},[e._v("Toggle Dropdown")])])}],h=(n("7f7f"),n("d92a"),n("75fc")),m=n("bc3a"),g=n.n(m),b={getRepos:function(){return g.a.get("/api/v1/repos").then(function(e){return e.data})},getSingleRepo:function(e){var t="repoId="+e.id,n="/api/v1/repos/one?"+t;return g.a.get(n).then(function(e){return e.data})},getBranches:function(e){var t="/api/v1/branches?repoId="+e.id;return g.a.get(t).then(function(e){return e.data})},getCommits:function(e,t,n){var o="repoId="+e.id+"&";t="branchName="+t+"&",n="commitId="+n+"&";var s="size=30",i="/api/v1/commits?"+o+t+n+s;return g.a.get(i).then(function(e){return e.data})},refreshGit:function(e){var t="repoId="+e.id,n="/api/v1/repos/actions/refresh/git?"+t;return g.a.get(n).then(function(e){return e.data})}},v=b,C={name:"home",data:function(){return{toggles:{isReposLoading:!0,isCommitsLoading:!1,isLoadMoreBtnDisabled:!1,isRepoBeingIndexed:!1,isRepoFetchError:!1,isCommitFetchFailed:!1},repos:[],commits:[],selectedRepo:-1,selectedBranch:""}},computed:{branches:function(){if(-1==this.selectedRepo)return[];var e=this.repos[this.selectedRepo];return e.branches},$getUiState:function(){var e=this.toggles;return e.isReposLoading?"LOADING_REPOS":e.isRepoFetchError?"REPO_ERROR":0==e.isReposLoading&&0==e.isRepoFetchError&&-1==this.selectedRepo?"SELECT_REPO":-1!=this.selectedRepo&&e.isRepoBeingIndexed?"REPO_INDEX":-1!=this.selectedRepo&&e.isCommitsLoading?"FETCHING_COMMITS":-1!=this.selectedRepo&&e.isCommitFetchFailed?"COMMIT_ERROR":0==e.isCommitsLoading?"DISPLAY_COMMITS":void 0}},methods:{setSelectedRepo:function(e){"REPO_INDEX"!==this.$getUiState&&(this.selectedRepo=e,this.selectedBranch="",this.setSelectedBranch("master"))},setSelectedBranch:function(e){this.selectedBranch!==e&&(this.selectedBranch=e,this.isLoadMoreBtnDisabled=!1,this.commits=[],this.fetchNextSetOfCommits())},retrieveCommits:function(e,t,n){var o=this;this.toggles.isCommitsLoading=!0,this.toggles.isCommitFetchFailed=!1,v.getCommits(e,t,n).then(function(e){var t;o.toggles.isCommitsLoading=!1,o.toggles.isCommitFetchFailed=!1,o.toggles.isRepoBeingIndexed=!1,(t=o.commits).push.apply(t,Object(h["a"])(e.data)),0==e.length&&(o.toggles.isLoadMoreBtnDisabled=!0)},function(e){e.response&&423===e.response.status?setTimeout(function(){this.toggles.isRepoBeingIndexed=!0,this.fetchNextSetOfCommits()}.bind(o),1e3):(o.toggles.isCommitFetchFailed=!0,o.toggles.isCommitsLoading=!1,console.log(e))})},fetchNextSetOfCommits:function(){if(-1!=this.selectedRepo){var e=this.repos[this.selectedRepo];if(0==this.commits.length){this.toggles.isLoadMoreBtnDisabled=!1;var t=this.getBranchFromRepo(e,this.selectedBranch);this.retrieveCommits(e,this.selectedBranch,t.latestCommitId)}else{var n=this.commits[this.commits.length-1];n.sortOrderNext?this.retrieveCommits(e,this.selectedBranch,n.sortOrderNext):this.toggles.isLoadMoreBtnDisabled=!0}}},updateRepo:function(e){var t=this;this.commits=[],v.getSingleRepo(e).then(function(e){var n=e.data;t.repos[t.selectedRepo]=n,t.repos.push(),t.repos.pop(),t.fetchNextSetOfCommits()},function(n){n.response&&423===n.response.status?setTimeout(function(){this.toggles.isRepoBeingIndexed=!0,this.updateRepo(e)}.bind(t),1e3):(t.toggles.isCommitFetchFailed=!0,t.toggles.isCommitsLoading=!1,console.log(n))})},$refreshUi:function(){if(-1!=this.selectedRepo){var e=this.repos[this.selectedRepo];this.updateRepo(e)}},$refreshGit:function(){var e=this;if(-1!=this.selectedRepo){var t=this.repos[this.selectedRepo];this.toggles.isRepoBeingIndexed=!0,v.refreshGit(t).then(function(){console.log("Repo is refreshed: "+t.id),e.updateRepo(t)})}},getBranchFromRepo:function(e,t){for(var n=e.branches,o=n.length,s=0;s<o;s++){var i=n[s];if(i.name===t)return i}}},mounted:function(){var e=this;this.toggles.isReposLoading=!0,v.getRepos().then(function(t){e.toggles.isReposLoading=!1,e.toggles.isRepoFetchError=!1,e.repos=t.data},function(t){e.toggles.isReposLoading=!1,e.toggles.isRepoFetchError=!0})}},_=C,R=Object(a["a"])(_,p,f,!1,null,null,null);R.exports;o["a"].use(u["a"]);var y=new u["a"]({routes:[{path:"/",name:"home",component:function(){return n.e("about").then(n.bind(null,"3c3c"))}},{path:"/repos",name:"repos",component:function(){return n.e("about").then(n.bind(null,"3c3c"))}},{path:"/startup",name:"startup",component:function(){return n.e("about").then(n.bind(null,"9cd4"))}},{path:"/error",name:"error",component:function(){return n.e("about").then(n.bind(null,"0636"))}},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),S=n("2f62");o["a"].use(S["a"]);var O=new S["a"].Store({state:{},mutations:{},actions:{}}),w=n("9483");Object(w["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("4989"),n("ab8b"),n("4436"),n("a50f"),n("bd7b"),n("a1a3"),n("b5b4"),n("4910"),n("e481"),n("fb2d");var E=n("cd4e");Object(E["loadProgressBar"])(),o["a"].config.productionTip=!1,o["a"].use(s["a"]),new o["a"]({router:y,store:O,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("5e27"),s=n.n(o);s.a},"5e27":function(e,t,n){},a1a3:function(e,t,n){},a50f:function(e,t,n){},b5b4:function(e,t,n){},bd7b:function(e,t,n){},e481:function(e,t,n){},fb2d:function(e,t,n){}});
//# sourceMappingURL=app.45095d1c.js.map